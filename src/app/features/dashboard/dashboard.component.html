<div class="container mx-auto p-8 min-h-[calc(100vh-theme(space.16))] pb-24 relative">
  <div class="mb-8">
    <h2 class="text-3xl font-bold mb-2">Bewerbungs-Dashboard</h2>
    <div class="w-48 h-1 bg-gradient-to-r from-purple-600 to-pink-500 mb-4"></div>
    <p class="text-base text-gray-400">Überblick über deine aktuellen Bewerbungsaktivitäten</p>
  </div>

  <div class="flex flex-row space-x-6 mb-8">
    <app-card *ngFor="let stat of stats; let i = index"
              [borderColor]="stat.borderColor"
              [delay]="i * 100"
              (click)="onStatClick(stat)"
              class="flex-1 cursor-pointer transition hover:brightness-110">
      <div class="p-5">
        <h3 class="text-gray-400 mb-1 text-base">{{ stat.title }}</h3>
        <div class="flex items-center">
          <div class="text-5xl font-bold mb-1 text-white">{{ stat.value }}</div>
          <span *ngIf="stat.total" class="text-gray-400 text-base ml-2 mb-1">/ {{ stat.total }}</span>
        </div>
        <div class="w-12 h-1" [ngClass]="'bg-gradient-to-r ' + stat.borderColor"></div>
      </div>
    </app-card>
  </div>

  <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
    <app-card borderColor="from-purple-600 via-blue-600 to-cyan-500"
              [delay]="400"
              class="lg:col-span-2">
       <div class="p-5 flex flex-col h-full">
         <div class="mb-4 flex justify-between items-center">
           <div>
             <h3 class="text-xl font-bold mb-1 text-white">Aktuelle Bewerbungen</h3>
             <div class="w-36 h-1 bg-gradient-to-r from-purple-600 to-pink-500"></div>
           </div>
           <a routerLink="/applications/new"
              class="bg-gradient-to-r from-purple-600 to-pink-500 hover:from-purple-700 hover:to-pink-600 text-white font-bold py-2 px-4 rounded transition duration-300 cursor-pointer"> + Neue Bewerbung
           </a>
         </div>

         <div class="flex-1 overflow-auto">
           <table class="w-full text-left text-sm">
             <thead class="sticky top-0 bg-gray-900 z-10">
               <tr class="text-gray-400 border-b border-gray-800">
                 <th class="py-2 px-2">Unternehmen</th>
                 <th class="py-2 px-2">Position</th>
                 <th class="py-2 px-2">Status</th>
                 <th class="py-2 px-2">Datum</th>
                 <th class="py-2 px-2 text-right">Aktionen</th>
               </tr>
             </thead>
             <tbody @listAnimation>
               <tr *ngFor="let app of applications; let i = index"
                   (click)="onApplicationClick(app)"
                   class="border-b border-gray-800 cursor-pointer transition hover:bg-gray-800">
                 <td class="py-3 px-2">
                   <div class="flex items-center gap-3">
                     <div class="w-6 h-6 rounded-full flex-shrink-0" [ngClass]="app.color"></div>
                     <div>
                       <div class="font-medium text-white text-sm">{{ app.company }}</div>
                       <div class="text-sm text-gray-500">{{ app.location }}</div>
                     </div>
                   </div>
                 </td>
                 <td class="py-3 px-2 text-gray-300 text-sm">{{ app.position }}</td>
                 <td class="py-3 px-2">
                   <span class="px-3 py-1 rounded-full text-xs"
                         [ngClass]="getStatusColor(app.status)">{{ app.status }}</span>
                 </td>
                 <td class="py-3 px-2 text-gray-400 text-sm">{{ app.date }}</td>
                 <td class="py-3 px-2 text-right">
                   <button
                     (click)="onDeleteClick(app, $event)"
                     class="text-red-500 hover:text-red-400 p-1 rounded hover:bg-red-900/50 transition"
                     title="Löschen">
                      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4">
                        <path fill-rule="evenodd" d="M8.75 1A2.75 2.75 0 0 0 6 3.75v.443c-.795.077-1.58.11-2.368.11a.75.75 0 0 0-.73.73V6c0 .414.336.75.75.75h.75v9.75a2 2 0 0 0 2 2h7.5a2 2 0 0 0 2-2V6.75h.75a.75.75 0 0 0 .75-.75v-.948a.75.75 0 0 0-.73-.73c-.788 0-1.573-.033-2.368-.11v-.443A2.75 2.75 0 0 0 11.25 1h-2.5ZM7.5 3.75c0-.69.56-1.25 1.25-1.25h2.5c.69 0 1.25.56 1.25 1.25V4h-5v-.25Zm1.5 5.5a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75Zm-.75 3.25a.75.75 0 0 1 .75-.75h3.5a.75.75 0 0 1 0 1.5h-3.5a.75.75 0 0 1-.75-.75Z" clip-rule="evenodd" />
                      </svg>
                   </button>
                 </td>
               </tr>
             </tbody>
           </table>
         </div>
       </div>
    </app-card>

    <div>
      <app-card borderColor="from-blue-600 to-purple-600"
                [delay]="500">
        <div class="p-4 flex flex-col h-full">
          <div class="mb-3">
            <h3 class="text-xl font-bold mb-1 text-white">Nächste Termine</h3>
            <div class="w-32 h-1 bg-gradient-to-r from-blue-500 to-purple-600"></div>
          </div>
          <div class="flex-1 overflow-auto">
            <div class="space-y-2" @listAnimation>
              <div *ngFor="let event of events"
                  (click)="onEventClick(event)"
                  class="border-l-4 pl-3 py-2 cursor-pointer transition hover:bg-gray-800/50"
                  [ngClass]="event.color">
                <div class="flex justify-between items-center">
                  <h4 class="font-bold text-white text-sm">{{ event.title }}</h4>
                  <span [ngClass]="getEventDayLabelClass(event.date)" class="text-sm font-bold">
                    {{ getEventDayLabel(event.date) }}
                  </span>
                </div>
                <p class="text-gray-300 text-sm">{{ event.company }}</p>
                <p class="text-gray-500 text-sm">{{ event.time }}</p>
              </div>
            </div>
          </div>
        </div>
      </app-card>
      </div>
  </div>

  <app-confirmation-dialog
    *ngIf="isConfirmingDelete && applicationToDelete"
    [message]="'Möchtest du die Bewerbung wirklich löschen?\n\nFirma: ' + applicationToDelete.company + '\nPosition: ' + applicationToDelete.position"
    (confirm)="confirmDelete()"
    (cancel)="cancelDelete()">
  </app-confirmation-dialog>

</div>